# 05. Журнал выполненных задач

* 2025-10-31 — Инициализация проекта, создание структуры /spec, /src, /docs.
* 2025-11-01 — Уточнены спецификации методов Bitrix24, режимов безопасности и структуры подтверждений; зафиксирован базовый вебхук портала.
* 2025-11-02 — Добавлен модуль GPT-клиента, обновлена архитектура и README, реализована обработка деградации модели и обновлён оркестратор.
* 2025-11-03 — Реализовано полное управление подтверждениями (одобрение и отклонение), обновлены спецификации безопасности и состояния.
* 2025-11-04 — Добавлена синхронизация состояния при чтении сделок и контактов, обновлены спецификации архитектуры и памяти.
* 2025-11-05 — Реализован HTTP API-адаптер для оркестратора, обновлена архитектура и описан эндпоинт `/chat`.
* 2025-11-06 — Настроена ротация JSONL-логов, описаны правила архивирования и устойчивости логирования.
* 2025-11-07 — Добавлены автоматизированные тесты с моками Bitrix и GPT, обновлена архитектура разделом о тестировании.
* 2025-11-08 — Реализована поддержка `batch` и `event.*`, обновлены спецификации безопасности и состояния, добавлены тесты и логика синхронизации подписок.
* 2025-11-09 — Переведены временные метки на timezone-aware UTC-формат, обновлены спецификации и устранены предупреждения pytest.
* 2025-11-10 — Внедрена аутентификация HTTP API по заголовку `X-API-Key`, обновлены спецификации безопасности и архитектуры, расширена документация.
* 2025-11-11 — Добавлены справочные методы Bitrix24 (категории сделок, стадии, статусы, рабочие группы), обновлены спецификации и оркестратор.
* 2025-11-12 — Настроен аудит и блокировка повторных ошибок аутентификации HTTP API, обновлены спецификации безопасности и архитектуры.
* 2025-11-13 — Реализована выгрузка архивов логов в S3-совместимое хранилище, добавлена автоматическая синхронизация накопленных архивов и тесты подсистемы логирования.
* 2025-11-14 — Настроен GitHub Actions workflow для запуска `pytest` с покрытием, добавлены dev-зависимости и публикация отчёта `coverage.xml`.
* 2025-11-15 — Добавлены интеграционные тесты оркестратора для пакетных вызовов и управления подписками на события Bitrix24.
* 2025-11-16 — Детализированы описания REST-методов Bitrix24, внедрена валидация обязательных параметров и автоопределение HTTP-методов в оркестраторе.
* 2025-11-17 — Настроен контроль `DeprecationWarning` в CI, обновлена архитектурная спецификация и workflow тестов.
* Сделано в этой итерации:
  * 2025-11-18 — Добавлены автотесты для чтения справочников (`crm.status.list`, `crm.deal.category.*`, `sonet.group.*`), уточнена спецификация архитектуры по обновлению истории `done`.
  * 2025-11-19 — Внедрена загрузка конфигурации из `.env`, реализован Telegram-адаптер и обновлены спецификации архитектуры и безопасности под новый канал связи.
  * 2025-11-20 — Выделен модуль `src/app/telegram_runner.py` для запуска Telegram-бота и обновлена архитектура, чтобы CLI делегировала запуск этому модулю.
  * 2025-11-21 — Проведена оценка Telegram-канала, зафиксированы ограничения в архитектуре и реализовано разбиение длинных сообщений на части.
  * 2025-11-22 — Настроена интеграция с ChatGPT и добавлено пользовательское резюме действий без технических деталей в ответах Telegram-бота.
  * 2025-11-23 — Проведён аудит логики принятия решений, внедрён модуль текстового резюме состояния и обновлены спецификации под использование контекста без повторных уточнений.
  * 2025-11-24 — Закрыт весь оставшийся TODO: внедрены self-check контекста, асинхронная обработка Telegram с уведомлениями об ошибках, мониторинг выгрузок логов с ретраями, расширенные автотесты (Telegram-адаптер, запуск, резюме, валидация) и статические проверки `ruff`/`mypy`.
  * 2025-11-25 — Реализована параллельная обработка пользователей: оркестратор получил блокировки на уровне каждого пользователя, Telegram-адаптер использует настраиваемый пул потоков, спецификации обновлены и добавлены тесты на конкурентность.
  * 2025-11-26 — Переименован пакет логирования в `src/app_logging`, обновлены спецификации и импорты для исключения конфликта со стандартной библиотекой `logging`.
